<!DOCTYPE html>
<html lang="en" data-theme="neo">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DcTalk â€¢ Blocked</title>
  <link rel="stylesheet" href="/main/theme.css">
  <style>
    :root { --bg-900:#1f2124; --bg-800:#282b30; --bg-700:#30343a; --text:#e6e7e8; --muted:#b2b4b7; --brand:#5865F2; --ring:#2a2c31; }
    html, body { height:100%; margin:0; }
    body { background: var(--bg-900); color: var(--text); font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif; }
    .topbar { position: fixed; top:0; left:0; right:0; height:56px; display:flex; align-items:center; justify-content:space-between; padding:0 16px; background: rgba(40,43,48,.72); backdrop-filter: blur(6px); border-bottom:1px solid var(--ring); z-index:20; }
    .brand { font-weight:900; letter-spacing:.3px; }
    .nav-links { display:flex; gap:8px; }
    .link { color:#fff; text-decoration:none; background:#40444b; padding:8px 12px; border-radius:10px; font-weight:700; }
    .wrap { max-width:980px; margin:82px auto 26px; padding:0 12px; }
    .subnav { display:flex; gap:8px; padding:10px 12px; background: var(--bg-800); border:1px solid var(--ring); border-radius:12px; }
    .subnav a{ text-decoration:none; color:#fff; background:#40444b; padding:8px 12px; border-radius:10px; font-weight:700; }
    .subnav a.active{ background: var(--brand); }
    .list { display:flex; flex-direction:column; gap:8px; margin-top:14px; }
    .item { display:flex; align-items:center; justify-content:space-between; background: var(--bg-700); border-radius:10px; padding:12px 14px; }
    .btn { background: var(--brand); color:#fff; border:none; border-radius:10px; padding:8px 12px; font-weight:800; cursor:pointer; }
    .muted { color: var(--muted); }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="brand">DcTalk</div>
    <div class="nav-links">
      <a class="link" href="/main/index.html">App</a>
      <a class="link" href="/main/dm.html">DMs</a>
      <a class="link" href="/main/friends.html">Friends</a>
      <a class="link" href="/main/profile.html">Profile</a>
      <a class="link" href="/main/call.html">Calls</a>
    </div>
    <div class="nav-links"><a class="link" href="/main/home.html" id="logout">Logout</a></div>
  </div>
  <div class="wrap">
    <div class="subnav">
      <a href="/main/friends.html">Friends</a>
      <a href="/main/online.html">Online</a>
      <a href="/main/pending.html">Pending</a>
      <a href="/main/blocked.html" class="active">Blocked</a>
      <a href="/main/friends.html" style="background:#57F287;color:#1f2429;font-weight:900">Add Friend</a>
    </div>
    <div class="list" id="blocked"></div>
    <div class="muted" id="msg"></div>
  </div>
  <script>
    const USERS_KEY="dc_users"; const CURRENT_KEY="dc_current_user";
    function loadUsers(){ try{ const r=localStorage.getItem(USERS_KEY); return r?JSON.parse(r):{}; }catch(e){ return {}; } }
    function saveUsers(u){ localStorage.setItem(USERS_KEY, JSON.stringify(u)); }
    const cu=localStorage.getItem(CURRENT_KEY); if(!cu){ location.href="/main/home.html"; }
    let users=loadUsers(); let me=users[cu];
    function render(){ users=loadUsers(); me=users[cu]; const list=document.getElementById("blocked"); const msg=document.getElementById("msg"); list.innerHTML=""; msg.textContent="";
      const bl=(me.blocked||[]); if(bl.length===0){ msg.textContent="You haven't blocked anyone."; return; }
      bl.forEach(u=>{ const d=document.createElement("div"); d.className="item"; const l=document.createElement("div"); l.textContent=users[u]?users[u].displayName: u; const a=document.createElement("div"); const ub=document.createElement("button"); ub.className="btn"; ub.textContent="Unblock"; ub.onclick=()=>unblock(u); a.appendChild(ub); d.appendChild(l); d.appendChild(a); list.appendChild(d); });
    }
    function unblock(u){ me.blocked = (me.blocked||[]).filter(x=>x!==u); users[cu]=me; saveUsers(users); render(); }
    document.getElementById("logout").onclick=()=>{ localStorage.removeItem(CURRENT_KEY); };
    render();
  </script>
</body>
</html>
